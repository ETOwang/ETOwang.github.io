/* Modern homepage enhancements: hero, glassmorphism cards, dark mode helpers, accessibility */

:root {
  --bg: #f8fafc;
  --bg-muted: #f1f5f9;
  --fg: #0f172a;
  --fg-muted: #334155;
  --card: rgba(255, 255, 255, 0.7);
  --card-border: rgba(148, 163, 184, 0.35);
  --primary: #2563eb;

  /* Footer/link/icon tokens */
  --link-underline: rgba(37, 99, 235, 0.4);
  --icon-fg: var(--fg);
  --icon-border: var(--card-border);
  --icon-bg: rgba(255, 255, 255, 0.5);
}

html.dark {
  --bg: #0b1220;
  --bg-muted: #0f172a;
  --fg: #e2e8f0;
  --fg-muted: #94a3b8;
  --card: rgba(15, 23, 42, 0.5);
  --card-border: rgba(100, 116, 139, 0.35);
  --primary: #60a5fa;

  /* Footer/link/icon tokens */
  --link-underline: rgba(96, 165, 250, 0.5);
  --icon-fg: var(--fg);
  --icon-border: var(--card-border);
  --icon-bg: rgba(15, 23, 42, 0.55);
}

/* Basic theming for body and common text to ensure contrast on homepage */
body.modern-home {
  background: linear-gradient(180deg, var(--bg) 0%, var(--bg-muted) 100%);
  color: var(--fg);
}

body.modern-home a { color: var(--primary); }

/* Focus visible for accessibility */
:where(a, button, [role="button"]) :focus { outline: none; }
:where(a, button, [role="button"]).focus-visible,
:where(a, button, [role="button"]):focus-visible {
  outline: 3px solid rgba(37, 99, 235, .45);
  outline-offset: 2px;
}

/* Hero section */
.hero-wrap {
 position: relative;
 border-radius: 16px;
 padding: 32px 24px;
 margin: 24px 0;
 background: radial-gradient(1200px 400px at 10% -10%, rgba(99,102,241,.25), transparent 60%),
             radial-gradient(1200px 400px at 110% 10%, rgba(34,197,94,.18), transparent 60%),
             linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
 border: 1px solid var(--card-border);
 backdrop-filter: blur(10px) saturate(1.05);
 -webkit-backdrop-filter: blur(10px) saturate(1.05);
}
html.dark .hero-wrap {
  background: radial-gradient(1200px 400px at 10% -10%, rgba(99,102,241,.2), transparent 60%),
              radial-gradient(1200px 400px at 110% 10%, rgba(34,197,94,.16), transparent 60%),
              linear-gradient(180deg, rgba(15,23,42,.65), rgba(15,23,42,.45));
}
.hero-title { font-size: 2rem; line-height: 1.2; margin: 8px 0; letter-spacing: .3px; color: var(--fg); }
.hero-tagline { font-size: 1rem; color: var(--fg-muted); }
.hero-cta { display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px; border-radius: 999px; border: 1px solid transparent; text-decoration: none; transition: transform .15s ease, box-shadow .15s ease, background .15s ease; }
.hero-cta.primary { background: linear-gradient(180deg, #3b82f6, #2563eb); color: #fff; box-shadow: 0 10px 18px -10px rgba(37, 99, 235, .55); }
.hero-cta.secondary { background: transparent; border-color: var(--card-border); color: var(--fg); }
.hero-cta:hover { transform: translateY(-2px); }
.hero-row { display: flex; flex-wrap: wrap; align-items: center; gap: 18px; margin-top: 14px; }
.hero-avatar { width: 84px; height: 84px; border-radius: 9999px; border: 2px solid rgba(148,163,184,.45); box-shadow: 0 8px 20px -10px rgba(15,23,42,.35); object-fit: cover; }

/* Glass cards grid */
.featured-grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
@media (min-width: 640px) { .featured-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (min-width: 1024px) { .featured-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }

.glass-card {
  position: relative;
  border-radius: 14px;
  border: 1px solid var(--card-border);
  background: var(--card);
  backdrop-filter: blur(8px) saturate(1.05);
  -webkit-backdrop-filter: blur(8px) saturate(1.05);
  box-shadow: 0 12px 22px -12px rgba(15, 23, 42, 0.35);
  transition: transform .18s ease, box-shadow .18s ease;
}
.glass-card:hover { transform: translateY(-4px); box-shadow: 0 20px 32px -14px rgba(15, 23, 42, 0.45); }
.glass-card .card-inner { padding: 16px; }
.glass-card .card-title { font-size: 1.05rem; font-weight: 700; color: var(--fg); margin-bottom: 8px; }
.glass-card .card-excerpt { color: var(--fg-muted); font-size: .95rem; }
.glass-card .card-meta { display:flex; gap:10px; flex-wrap: wrap; margin-top: 12px; align-items: center; color: var(--fg-muted); font-size: .85rem; }
.badge { display:inline-block; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--card-border); color: var(--fg-muted); font-size: .75rem; }

/* Header nav enhancements and active state */
#main-nav .main-nav-link { position: relative; }
#main-nav .main-nav-link.active, #main-nav .main-nav-link[aria-current="page"] {
  color: var(--primary);
}
#main-nav .main-nav-link.active::after, #main-nav .main-nav-link[aria-current="page"]::after {
  content: "";
  position: absolute; left: 0; bottom: -6px; height: 2px; width: 100%; background: var(--primary);
}

/* Footer social icons row */
.footer-social { display:flex; gap: 12px; align-items: center; justify-content: center; margin-top: 10px; }
.footer-social a { width: 36px; height: 36px; display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; border: 1px solid var(--card-border); color: var(--fg); background: var(--card); transition: transform .15s ease, box-shadow .15s ease; text-decoration: none; }
.footer-social a:hover { transform: translateY(-2px); box-shadow: 0 8px 18px -10px rgba(15,23,42,.35); }

/* Icon pill buttons (ghost) */
.icon-pill { display:inline-flex; align-items:center; justify-content:center; width:40px; height:40px; border-radius:9999px; border:1px solid var(--icon-border); color: var(--icon-fg); background: transparent; text-decoration: none; transition: background-color .2s ease, box-shadow .2s ease, transform .2s ease, border-color .2s ease; }
.icon-pill .fa { font-size: 16px; }
.icon-pill:hover { background: var(--icon-bg); transform: translateY(-2px); box-shadow: 0 8px 18px -12px rgba(15,23,42,.35), 0 0 0 3px rgba(37, 99, 235, 0.12); border-color: rgba(148, 163, 184, 0.5); }
.icon-pill:focus-visible { outline: 3px solid rgba(37, 99, 235, .45); outline-offset: 2px; }

/* Dark mode toggle button */
.theme-toggle-btn { display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border-radius: 50%; border:1px solid var(--card-border); background: var(--card); color: var(--fg); cursor: pointer; }

/* Homepage-only layout overrides */
body.modern-home:not(.sidebar-restyled) #main { float: none; width: 100%; margin: 0; }
body.modern-home:not(.sidebar-restyled) #sidebar { display: none; }

/* Quick Archives pills */
.quick-archives { margin: 16px 0; }
/* Featured section heading spacing to remove inline styles and align rhythm */
.modern-home #main .widget-title { margin: 16px 0; color: var(--fg); }
.pill-row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
.pill { display: inline-flex; align-items: center; gap: 6px; padding: 8px 12px; border-radius: 999px; border: 1px solid var(--card-border); background: var(--card); color: var(--fg); text-decoration: none; transition: transform .15s ease, box-shadow .15s ease, background-color .15s ease; }
.pill .fa { opacity: .8; }
.pill:hover { transform: translateY(-2px); box-shadow: 0 10px 18px -12px rgba(15,23,42,.35); }
.pill.primary { background: linear-gradient(180deg, #3b82f6, #2563eb); border-color: transparent; color: #fff; box-shadow: 0 12px 22px -12px rgba(37, 99, 235, .55); }

/* Restyled sidebar (optional mode) */
body.modern-home.sidebar-restyled #sidebar { display: block; }
body.modern-home.sidebar-restyled #main { display: inline; float: left; width: 73.33333333333333%; margin: 0 0.833333333333333%; }
body.modern-home.sidebar-restyled #sidebar .widget-wrap { border-radius: 14px; border: 1px solid var(--card-border); background: var(--card); backdrop-filter: blur(8px) saturate(1.05); -webkit-backdrop-filter: blur(8px) saturate(1.05); box-shadow: 0 12px 22px -12px rgba(15,23,42,.35); padding: 12px; margin-bottom: 16px; transition: transform .18s ease, box-shadow .18s ease; }
body.modern-home.sidebar-restyled #sidebar .widget-wrap:hover { transform: translateY(-2px); box-shadow: 0 18px 28px -14px rgba(15,23,42,.45); }
body.modern-home.sidebar-restyled #sidebar .widget-title { color: var(--fg-muted); margin: 0 0 8px 0; font-size: .95rem; letter-spacing: .5px; }
body.modern-home.sidebar-restyled #sidebar .widget { padding: 2px 4px; }
body.modern-home.sidebar-restyled #sidebar .widget ul li, body.modern-home.sidebar-restyled #sidebar .archive-list li { margin: 6px 0; }
body.modern-home.sidebar-restyled #sidebar a { color: var(--fg); text-decoration: none; }
body.modern-home.sidebar-restyled #sidebar a:hover { color: var(--primary); }

/* Avoid affecting non-home pages */
/* Only basic variables and components; rest of legacy theme remains intact */

/* Homepage bottom spacing to separate main content from footer and respect safe areas */
.home-main-spacing { padding-bottom: calc(48px + env(safe-area-inset-bottom)); }
@media (min-width: 768px) { .home-main-spacing { padding-bottom: calc(64px + env(safe-area-inset-bottom)); } }

/* Footer glassmorphism redesign */
#footer.site-footer { position: relative; padding: 40px 0 calc(44px + env(safe-area-inset-bottom)); background: transparent; border-top: none; color: var(--fg); }
.divider-gradient { position: relative; }
@media (min-width: 768px) { #footer.site-footer { padding: 56px 0 calc(60px + env(safe-area-inset-bottom)); } }
#footer.site-footer::before,
.divider-gradient::before { content: ""; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(to right, rgba(148,163,184,0), rgba(148,163,184,0.35), rgba(148,163,184,0)); }
.footer-card, .footer-glass { border: 1px solid var(--card-border); border-radius: 14px; background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55)); backdrop-filter: blur(8px) saturate(1.05); -webkit-backdrop-filter: blur(8px) saturate(1.05); padding: 20px; box-shadow: 0 10px 18px -12px rgba(15,23,42,.35); }
html.dark .footer-card, html.dark .footer-glass { background: linear-gradient(180deg, rgba(15,23,42,.65), rgba(15,23,42,.45)); }
.footer-grid { display: grid; grid-template-columns: 1fr; gap: 16px; align-items: start; }
@media (min-width: 768px) { .footer-grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }
.footer-title { font-weight: 700; font-size: .95rem; letter-spacing: .3px; color: var(--fg-muted); margin-bottom: 8px; }
.footer-about { color: var(--fg-muted); }
/* Quick Links: horizontal flex with responsive wrap and accessible spacing */
.footer-links { list-style: none; padding: 0; margin: 0; display: flex; flex-wrap: wrap; align-items: center; gap: 8px 24px; }
#footer.site-footer .footer-links a { color: var(--fg); text-decoration: underline; text-decoration-color: var(--link-underline); text-underline-offset: 3px; transition: color .18s ease, text-decoration-color .18s ease, transform .18s ease; }
#footer.site-footer .footer-links a:hover { color: var(--primary); text-decoration-color: var(--primary); transform: translateX(2px); }
/* Optional separators on wider screens only */
@media (min-width: 768px) {
 .footer-links li { position: relative; display: inline-flex; align-items: center; }
 .footer-links li + li::before { content: "·"; color: var(--fg-muted); opacity: .7; margin-right: 6px; }
}
.footer-grid .footer-social { justify-content: flex-start; margin-top: 4px; }
#footer.site-footer .footer-social a { color: var(--fg); }
.footer-bottom { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--card-border); display: flex; justify-content: center; align-items: center; gap: 8px; color: var(--fg-muted); font-size: .9rem; flex-wrap: wrap; }
#footer.site-footer .footer-bottom a { color: var(--primary); text-decoration: none; }
.footer-bottom a:hover, #footer.site-footer .footer-bottom a:hover { text-decoration: underline; }

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  .hero-cta,
  .glass-card,
  .pill,
  #footer.site-footer .footer-links a,
  .icon-pill {
    transition: none !important;
  }
  .glass-card:hover,
  .pill:hover,
  .icon-pill:hover,
  #footer.site-footer .footer-links a:hover {
    transform: none !important;
    box-shadow: none !important;
  }
}
